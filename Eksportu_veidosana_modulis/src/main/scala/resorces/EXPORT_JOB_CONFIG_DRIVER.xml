<uber>
    <requests>
        <hbaseTableName>customer_requests</hbaseTableName>
        <hbaseTableNamespace>rights_of_access</hbaseTableNamespace>
        <hbaseTableColumnFamily>gdpr</hbaseTableColumnFamily>
        <hbaseRowkeyNewInstanceName>driverID</hbaseRowkeyNewInstanceName>
        <hbaseColumns>
            <column>customerId</column>
            <column>role</column>
            <column>status</column>
            <column>requestDateTime</column>
        </hbaseColumns>
        <hbaseFilter>status = 'new' and role = 'driver'</hbaseFilter>
    </requests>
    <exportConfig>
        <emailColumn>email</emailColumn>
        <startingPoint>
            <tableName>client_data.driver</tableName>
            <exportColumns>*</exportColumns>
        </startingPoint>
        <joinTable>
            <tableName>client_data.ride</tableName>
            <condition>ride.driverID = driver.driverID</condition>
            <exportColumns>
                driver.driverID,
                driver.first_name,
                driver.second_name,
                driver.email,
                driver.driver_licence_ISS,
                driver.driver_licence_EXP,
                ride.amount,
                ride.duration,
                ride.distance,
                ride.send_request_time,
                ride.ride_start_time
            </exportColumns>
        </joinTable>
        <joinTable>
            <tableName>client_data.driver_cars_mapping</tableName>
            <condition>driver_cars_mapping.driverID = driver.driverID and ride.ride_start_time between driver_cars_mapping.belonging_from and driver_cars_mapping.belonging_until</condition>
            <exportColumns>
                driver.driverID,
                driver.first_name,
                driver.second_name,
                driver.email,
                driver.driver_licence_ISS,
                driver.driver_licence_EXP,
                ride.amount,
                ride.duration,
                ride.distance,
                ride.send_request_time,
                ride.ride_start_time,
                driver_cars_mapping.carID,
                driver_cars_mapping.belonging_from,
                driver_cars_mapping.belonging_until
            </exportColumns>
        </joinTable>
        <joinTable>
            <tableName>client_data.cars</tableName>
            <condition>driver_cars_mapping.carID = cars.carID</condition>
            <exportColumns>*</exportColumns>
        </joinTable>
    </exportConfig>
    <outputPath>/tmp/test</outputPath>
</uber>